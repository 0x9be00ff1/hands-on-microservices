# 微服务架构概览

在正式讨论微服务架构前，有必要用简短的篇幅，讨论下微服务以及这种架构风格的优点和缺点。

在微服务出现之前，我们的架构多数是单体应用架构。会有一个或者少数几个”巨无霸“进程，里面可能包含了”用户管理“、”订单管理“、”支付确认“、”物流“等等各种复杂的业务逻辑和功能。这种传统的单块应用架构风格是很直观、自然的，然而在现代软件开发领域，特别是互联网开发领域中，单块架构遇到了一些问题。

单块架构的缺点
* 耦合严重：单块服务内的各个逻辑之间，往往缺乏清晰的边界。导致内部耦合严重，正所谓“牵一发而动全身”。
* 维护困难：单快服务包含了过多的业务，代码量严重膨胀。开发人员难免”失焦“，不知道如何下手。
* 团队协作困难：如果多人同时开发同一个单块应用，势必导致代码冲突成为常态，团队协作成本急剧上升。
* 测试困难：单块服务是作为一个整体进行开发、上线的。尽管你只对Ａ功能进行了修改，但难免会影响Ｂ功能。随着单块应用的愈发膨胀，测试工作量会提升数倍。

上述单块应用的缺点，在传统软件开发中，尚可通过“小心规划”、“人海战术”等方法解决。但到了互联网时代，就很难实现了。为什么这么讲呢？互联网软件开发，讲究的是“快糙猛”，对迭代速度的要求非常高。对于成熟的互联网企业，一个项目在一天内上线好几次，都是稀松平常的事情。试想一下我们的单块“巨无霸”服务，稍微改动一点，就要经过复杂的代码评审、测试验证，如何才能跟上快节奏的迭代和上线呢？

尽管微服务不是银弹，但微服务的出现，确实从一定程度上改善了这种情况。微服务是⼀种架构⻛格，将单块应⽤划分成⼀组⼩的服务，服务之间相互协作，以组合的形式，实现复杂的业务功能。

微服务相对于单块架构的优点
* 耦合低、边界清晰：按照业务进行拆分后，每个微服务都是独立的进程，只维护一块相对独立的业务，模块之间的耦合自然减少了。
* 职责清晰，易维护：微服务按照业务进行拆分，开发人员更容易聚焦于特定的业务逻辑，维护更加简单。
* 适应多团队协作：微服务拆分后，我们可以将不同的微服务“分派”给不同的团队甚至是不同的个人，由于功能拆分了，发生代码冲突、开发冲突的概率大大降低。
* 易于测试：按照微服务划分后，我们每次的修改，只影响这一个微服务，有限的影响使得其测试成本更低。

除了相对于单块应用的优点外，微服务还具有一些其他优点
* 技术选择更多样：由于微服务是各自独立的进程。各个团队可以根据自己的需要选择不同的技术方案。然而在实践中，我并不推荐这么搞，这会在后面技术选型时展开。
* 可独立部署：巨无霸服务包含了很多业务，势必占用更多的内存、CPU，优化起来也更为困难。微服务拆分后，可以独立部署，运维更加简单可行。
